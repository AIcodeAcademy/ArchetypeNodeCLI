# Task 4 for Plan c1-node-cli-f1-project-structure

Define core domain interfaces and types for the Node CLI tool.

**Layer**: domain  
**Status**: prompted

### Reference

- [Feature Blueprint](/docs/f1-project-structure.blueprint.md)
- [Implementation Plan](/containers/c1-node-cli/docs/f1/f1-project-structure.plan.md)
- [TypeScript rules](/containers/c1-node-cli/.ai/rules/0-typescript.rules.md)  
- [Node CLI rules](/containers/c1-node-cli/.ai/rules/1-node-cli.rules.md)
- [Domain Layer rules](/containers/c1-node-cli/.ai/rules/3-domain-layer.rules.md)

## Instructions

### Create domain types

`/containers/c1-node-cli/src/domain/types/index.ts`:
- Create Container type:
  ```typescript
  export interface Container {
    slug: string;
    name: string;
    language: string;
    archetype: string;
    description: string;
  }
  ```

- Create Feature type:
  ```typescript
  export interface Feature {
    id: string;
    slug: string;
    name: string;
    description: string;
    status: 'planned' | 'implemented' | 'pending';
  }
  ```

- Create Task type:
  ```typescript
  export interface Task {
    id: string;
    slug: string;
    description: string;
    status: 'planned' | 'prompted' | 'implemented' | 'pending';
    git?: string;
  }
  ```

- Create Plan type:
  ```typescript
  export interface Plan {
    slug: string;
    description: string;
    status: 'planned' | 'implemented' | 'pending';
    tasks: Task[];
  }
  ```

### Create domain interfaces

`/containers/c1-node-cli/src/domain/interfaces/index.ts`:
- Create ContainerRepository interface:
  ```typescript
  export interface ContainerRepository {
    getContainer(slug: string): Promise<Container>;
    listContainers(): Promise<Container[]>;
    createContainer(container: Container): Promise<void>;
    updateContainer(container: Container): Promise<void>;
  }
  ```

- Create FeatureRepository interface:
  ```typescript
  export interface FeatureRepository {
    getFeature(id: string): Promise<Feature>;
    listFeatures(): Promise<Feature[]>;
    createFeature(feature: Feature): Promise<void>;
    updateFeature(feature: Feature): Promise<void>;
  }
  ```

- Create PlanRepository interface:
  ```typescript
  export interface PlanRepository {
    getPlan(slug: string): Promise<Plan>;
    listPlans(): Promise<Plan[]>;
    createPlan(plan: Plan): Promise<void>;
    updatePlan(plan: Plan): Promise<void>;
  }
  ```

### Create domain enums

`/containers/c1-node-cli/src/domain/enums/index.ts`:
- Create Status enum:
  ```typescript
  export enum Status {
    PLANNED = 'planned',
    PROMPTED = 'prompted',
    IMPLEMENTED = 'implemented',
    PENDING = 'pending'
  }
  ```

- Create Layer enum:
  ```typescript
  export enum Layer {
    SYSTEM = 'system',
    DOMAIN = 'domain',
    APPLICATION = 'application'
  }
  ```

### Create domain errors

`/containers/c1-node-cli/src/domain/errors/index.ts`:
- Create base DomainError class:
  ```typescript
  export class DomainError extends Error {
    constructor(message: string) {
      super(message);
      this.name = 'DomainError';
    }
  }
  ```

- Create specific error classes:
  ```typescript
  export class ContainerNotFoundError extends DomainError {
    constructor(slug: string) {
      super(`Container with slug '${slug}' not found`);
      this.name = 'ContainerNotFoundError';
    }
  }

  export class FeatureNotFoundError extends DomainError {
    constructor(id: string) {
      super(`Feature with id '${id}' not found`);
      this.name = 'FeatureNotFoundError';
    }
  }

  export class PlanNotFoundError extends DomainError {
    constructor(slug: string) {
      super(`Plan with slug '${slug}' not found`);
      this.name = 'PlanNotFoundError';
    }
  }
  ```

> End of programming instructions for task `c1-f1-t4`. 
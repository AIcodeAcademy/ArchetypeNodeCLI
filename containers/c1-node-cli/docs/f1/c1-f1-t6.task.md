# Task 6 for Plan c1-node-cli-f1-project-structure

Create utility functions for common operations in the Node CLI tool.

**Layer**: domain  
**Status**: prompted

### Reference

- [Feature Blueprint](/docs/f1-project-structure.blueprint.md)
- [Implementation Plan](/containers/c1-node-cli/docs/f1/f1-project-structure.plan.md)
- [TypeScript rules](/containers/c1-node-cli/.ai/rules/0-typescript.rules.md)  
- [Node CLI rules](/containers/c1-node-cli/.ai/rules/1-node-cli.rules.md)
- [Domain Layer rules](/containers/c1-node-cli/.ai/rules/3-domain-layer.rules.md)

## Instructions

### Create file utilities

`/containers/c1-node-cli/src/domain/utils/file.ts`:
- Create FileUtils class:
  ```typescript
  export class FileUtils {
    public static async readFile(path: string): Promise<string> {
      return await fs.readFile(path, 'utf-8');
    }

    public static async writeFile(path: string, content: string): Promise<void> {
      await fs.writeFile(path, content, 'utf-8');
    }

    public static async exists(path: string): Promise<boolean> {
      return await fs.pathExists(path);
    }

    public static async ensureDir(path: string): Promise<void> {
      await fs.ensureDir(path);
    }

    public static async copyDir(src: string, dest: string): Promise<void> {
      await fs.copy(src, dest);
    }

    public static async removeDir(path: string): Promise<void> {
      await fs.remove(path);
    }
  }
  ```

### Create path utilities

`/containers/c1-node-cli/src/domain/utils/path.ts`:
- Create PathUtils class:
  ```typescript
  export class PathUtils {
    public static join(...paths: string[]): string {
      return path.join(...paths);
    }

    public static resolve(...paths: string[]): string {
      return path.resolve(...paths);
    }

    public static dirname(filePath: string): string {
      return path.dirname(filePath);
    }

    public static basename(filePath: string): string {
      return path.basename(filePath);
    }

    public static extname(filePath: string): string {
      return path.extname(filePath);
    }

    public static isAbsolute(filePath: string): boolean {
      return path.isAbsolute(filePath);
    }
  }
  ```

### Create string utilities

`/containers/c1-node-cli/src/domain/utils/string.ts`:
- Create StringUtils class:
  ```typescript
  export class StringUtils {
    public static slugify(str: string): string {
      return str
        .toLowerCase()
        .replace(/[^a-z0-9]+/g, '-')
        .replace(/(^-|-$)/g, '');
    }

    public static camelCase(str: string): string {
      return str
        .replace(/(?:^\w|[A-Z]|\b\w)/g, (word, index) => {
          return index === 0 ? word.toLowerCase() : word.toUpperCase();
        })
        .replace(/\s+/g, '');
    }

    public static pascalCase(str: string): string {
      return str
        .replace(/(?:^\w|[A-Z]|\b\w)/g, (word) => word.toUpperCase())
        .replace(/\s+/g, '');
    }

    public static kebabCase(str: string): string {
      return str
        .replace(/([a-z])([A-Z])/g, '$1-$2')
        .replace(/\s+/g, '-')
        .toLowerCase();
    }
  }
  ```

### Create validation utilities

`/containers/c1-node-cli/src/domain/utils/validation.ts`:
- Create ValidationUtils class:
  ```typescript
  export class ValidationUtils {
    public static isValidSlug(slug: string): boolean {
      return /^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(slug);
    }

    public static isValidId(id: string): boolean {
      return /^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(id);
    }

    public static isValidPath(path: string): boolean {
      return /^[a-zA-Z0-9/._-]+$/.test(path);
    }

    public static isValidVersion(version: string): boolean {
      return /^\d+\.\d+\.\d+$/.test(version);
    }
  }
  ```

### Create template utilities

`/containers/c1-node-cli/src/domain/utils/template.ts`:
- Create TemplateUtils class:
  ```typescript
  export class TemplateUtils {
    public static async render(template: string, data: Record<string, unknown>): Promise<string> {
      return template.replace(/\{\{([^}]+)\}\}/g, (match, key) => {
        const value = data[key.trim()];
        return value !== undefined ? String(value) : match;
      });
    }

    public static async renderFile(templatePath: string, data: Record<string, unknown>): Promise<string> {
      const template = await FileUtils.readFile(templatePath);
      return await this.render(template, data);
    }

    public static async renderAndWriteFile(
      templatePath: string,
      outputPath: string,
      data: Record<string, unknown>
    ): Promise<void> {
      const content = await this.renderFile(templatePath, data);
      await FileUtils.writeFile(outputPath, content);
    }
  }
  ```

### Create logging utilities

`/containers/c1-node-cli/src/domain/utils/logging.ts`:
- Create LoggingUtils class:
  ```typescript
  export class LoggingUtils {
    private static logger = winston.createLogger({
      level: 'info',
      format: winston.format.combine(
        winston.format.timestamp(),
        winston.format.json()
      ),
      transports: [
        new winston.transports.Console({
          format: winston.format.combine(
            winston.format.colorize(),
            winston.format.simple()
          )
        })
      ]
    });

    public static info(message: string, meta?: Record<string, unknown>): void {
      this.logger.info(message, meta);
    }

    public static warn(message: string, meta?: Record<string, unknown>): void {
      this.logger.warn(message, meta);
    }

    public static error(message: string, meta?: Record<string, unknown>): void {
      this.logger.error(message, meta);
    }

    public static debug(message: string, meta?: Record<string, unknown>): void {
      this.logger.debug(message, meta);
    }
  }
  ```

> End of programming instructions for task `c1-f1-t6`. 
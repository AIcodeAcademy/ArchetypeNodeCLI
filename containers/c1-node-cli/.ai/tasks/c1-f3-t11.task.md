# Task 11 for Plan c1-f3

Create logging service with configuration options

**Layer**: application  
**Status**: not-started

### Reference

- [Feature Blueprint](/docs/f3-logging.blueprint.md)
- [Implementation Plan](/containers/c1-node-cli/docs/f3-logging.plan.md)
- [Language coding rules](/containers/c1-node-cli/.ai/rules/0-typescript.rules.md)  
- [Node CLI rules](/containers/c1-node-cli/.ai/rules/1-node-cli.rules.md)
- [Application Layer rules](/containers/c1-node-cli/.ai/rules/4-application-layer.rules.md)

## Instructions

- `src/app/logger/loggerConfig.type.ts` : Define logger configuration
  - Create an interface `LoggerConfig` with properties:
    - `level: LogLevelString` - Default log level
    - `format: LogFormatStyle` - Output format
    - `writers: LogWriterType[]` - Output destinations
    - `rotation?: RotationOptions` - Log rotation settings
    - `context?: Record<string, unknown>` - Default context values
    - `repository?: 'memory' | 'file'` - Log storage type
  - Define a constant `DEFAULT_LOGGER_CONFIG` with sensible defaults
  - Create a Zod schema `loggerConfigSchema` for validation

- `src/app/logger/loggerService.ts` : Implement the logging service
  - Create a class or function-based service interface
  - Implement core logging methods:
    - `error(message: string, error?: Error, metadata?: Record<string, unknown>): void`
    - `warn(message: string, metadata?: Record<string, unknown>): void`
    - `info(message: string, metadata?: Record<string, unknown>): void`
    - `debug(message: string, metadata?: Record<string, unknown>): void`
    - `trace(message: string, metadata?: Record<string, unknown>): void`
    - `log(level: LogLevel, message: string, metadata?: Record<string, unknown>): void`
  - Add configuration methods:
    - `setLevel(level: LogLevel): void`
    - `getLevel(): LogLevel`
    - `setFormat(format: LogFormatStyle): void`
    - `addWriter(writer: LogWriter): void`
  - Implement context management:
    - `withContext<T>(context: Record<string, unknown>, callback: () => T): T`
    - `getContext(): LogContext`

- `src/app/logger/loggerFactory.ts` : Create factory for logger
  - Implement a function `createLogger(config?: Partial<LoggerConfig>): LoggerService`
  - Add support for multiple named loggers with a function `getLogger(name?: string): LoggerService`
  - Create a singleton default logger instance
  - Implement proper configuration merging and validation

- `src/app/logger/index.ts` : Create barrel file
  - Export all logging service types and implementations
  - Re-export essential types from the domain and system layers

> End of programming instructions for task 11. 
---
syntax: "[Template Syntax](/.ai/syntax.template.md)"
task: "Implement file system repository"
folder: "/containers/c1-node-cli/.ai/tasks"
file: "c1-f1-t2.task.md"
---

# Task 2 for Plan c1-f1

Implement file system operations for reading .env files and accessing system environment variables.

**Layer**: system  
**Status**: not-started

### Reference

- [Feature Blueprint](/docs/f1-environment-management.blueprint.md)
- [Implementation Plan](/containers/c1-node-cli/docs/f1-environment-management.plan.md)
- [General coding rules](/containers/c1-node-cli/.ai/rules/0-typescript.rules.md)  
- [Node CLI archetype rules](/containers/c1-node-cli/.ai/rules/1-node-cli.rules.md)
- [System layer rules](/containers/c1-node-cli/.ai/rules/system.rules.md)

## Instructions

- `src/system/repositories/env-file.repository.ts` : File system operations for reading .env files
  - Create a class `EnvFileRepository` with methods:
    - `readEnvFile(path: string): Promise<Record<string, string>>`
    - `writeEnvFile(path: string, variables: Record<string, string>): Promise<void>`
    - `exists(path: string): Promise<boolean>`
    - `findEnvFiles(directory: string, pattern: string): Promise<string[]>`
  - Implement error handling for file operations
  - Use Node.js fs.promises for async operations

- `src/system/repositories/system-env.repository.ts` : System environment variable access
  - Create a class `SystemEnvRepository` with methods:
    - `get(key: string): string | undefined`
    - `getAll(): Record<string, string>`
    - `set(key: string, value: string): void`
  - Implement proper type safety and error handling
  - Use process.env for system environment access

> End of programming instructions for task 2. 
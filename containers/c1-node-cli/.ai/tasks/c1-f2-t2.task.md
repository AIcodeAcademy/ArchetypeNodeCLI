# Task 2 for Plan c1-f2

Implement utilities for loading configuration from files in different formats, with support for default and environment-specific configurations.

**Layer**: system  
**Status**: not-started

### Reference

- [Feature Blueprint](/docs/f2-configuration-management.blueprint.md)
- [Implementation Plan](/containers/c1-node-cli/docs/f2-configuration-management.plan.md)
- [Language coding rules](/containers/c1-node-cli/.ai/rules/0-typescript.rules.md)  
- [Archetype rules](/containers/c1-node-cli/.ai/rules/1-node-cli.rules.md)
- [Layer rules](/containers/c1-node-cli/.ai/rules/2-system-layer.rules.md)

## Instructions

### Implement File System Utilities

`src/system/configFile.util.ts`:
- Create utility to locate configuration files in standard locations
- Implement function to detect file format from extension
- Add function to validate file existence and permissions
- Create utility to resolve environment-specific config file paths

### Create Configuration File Loader

`src/system/configLoader.util.ts`:
- Implement JSON file parser with error handling
- Create function to merge multiple configuration files
- Add utility to handle file not found scenarios
- Implement function to validate loaded configuration structure
- Create error types for different loading failures

### Implement Configuration Writer

`src/system/configWriter.util.ts`:
- Create function to safely write configuration to file
- Implement backup creation before writing
- Add atomic write operations to prevent corruption
- Create utility to format configuration for writing

> End of programming instructions for task c1-f2-t2. 
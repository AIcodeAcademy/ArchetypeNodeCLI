# Task 4 for Plan c1-f4

Implement utilities for formatting help messages consistently across the CLI application.

**Layer**: system  
**Status**: not-started

### Reference

- [Feature Blueprint](/docs/f4-command-handling.blueprint.md)
- [Implementation Plan](/containers/c1-node-cli/docs/f4-command-handling.plan.md)
- [Language coding rules](/containers/c1-node-cli/.ai/rules/0-typescript.rules.md)  
- [Node CLI rules](/containers/c1-node-cli/.ai/rules/1-node-cli.rules.md)
- [System Layer rules](/containers/c1-node-cli/.ai/rules/2-system-layer.rules.md)

## Instructions

### Create Help Formatter Types

`src/system/helpFormatter.types.ts`:
- Define interfaces for help message components:
  - `HelpSection` with title and content properties
  - `CommandHelp` with command name, description, usage, options, examples, etc.
  - `GlobalHelp` with app description, available commands grouped by category, global options

### Implement Help Formatter Utilities

`src/system/helpFormatter.util.ts`:
- Import the Command types from `command.types.ts` and the help types from `helpFormatter.types.ts`
- Create a function `formatCommandHelp(command: Command): CommandHelp` that:
  - Formats a command's name, description, usage, arguments, and options into a consistent structure
  - Includes examples of command usage (if provided)
  - Handles nested commands appropriately
- Implement a function `formatGlobalHelp(commands: Command[], programInfo: ProgramInfo): GlobalHelp` that:
  - Formats the program name, version, and description
  - Groups commands by category/namespace 
  - Lists all available commands with brief descriptions
  - Includes global options
- Create helper functions for formatting specific parts:
  - `formatOptions(options: Option[]): string` for command options
  - `formatArguments(args: Argument[]): string` for command arguments
  - `formatUsage(command: Command): string` for command usage

### Implement Console Renderer

`src/system/helpConsoleRenderer.util.ts`:
- Import the Chalk library for colorized output (add to package.json if not already included)
- Use the help formatting utilities to render formatted help to the console
- Create functions to:
  - `renderCommandHelp(commandHelp: CommandHelp): void` - Display help for a specific command
  - `renderGlobalHelp(globalHelp: GlobalHelp): void` - Display global help with all commands
  - `renderError(message: string, command?: Command): void` - Display errors in a user-friendly way
- Use consistent styling (colors, spacing, indentation) throughout the rendered help

> End of programming instructions for task c1-f4-t4. 
---
syntax: "[Template Syntax](/.ai/syntax.template.md)"
task: "Implement environment validation"
folder: "/containers/c1-node-cli/.ai/tasks"
file: "c1-f1-t4.task.md"
---

# Task 4 for Plan c1-f1

Implement validation logic for environment configuration and variables.

**Layer**: domain  
**Status**: not-started

### Reference

- [Feature Blueprint](/docs/f1-environment-management.blueprint.md)
- [Implementation Plan](/containers/c1-node-cli/docs/f1-environment-management.plan.md)
- [General coding rules](/containers/c1-node-cli/.ai/rules/0-typescript.rules.md)  
- [Node CLI archetype rules](/containers/c1-node-cli/.ai/rules/1-node-cli.rules.md)
- [Domain layer rules](/containers/c1-node-cli/.ai/rules/domain.rules.md)

## Instructions

- `src/domain/validators/environment.validator.ts` : Validate environment configuration
  - Create a class `EnvironmentValidator` with methods:
    - `validateMode(mode: string): EnvironmentMode`
    - `validateContext(context: EnvironmentContext): void`
    - `validateEnvFiles(files: string[]): void`
  - Implement proper error handling and validation rules
  - Use Zod for runtime validation

- `src/domain/validators/env-variable.validator.ts` : Validate environment variables
  - Create a class `EnvVariableValidator` with methods:
    - `validateVariable(key: string, value: string, schema: EnvironmentVariable): void`
    - `validateRequiredVariables(variables: Record<string, string>, schema: EnvironmentVariableSchema): void`
    - `validateVariableType(value: string, type: EnvironmentVariableType): void`
  - Implement type-specific validation rules
  - Provide detailed error messages

> End of programming instructions for task 4. 
# Task 6 for Plan c1-f3

Define log entry domain model and validation

**Layer**: domain  
**Status**: not-started

### Reference

- [Feature Blueprint](/docs/f3-logging.blueprint.md)
- [Implementation Plan](/containers/c1-node-cli/docs/f3-logging.plan.md)
- [Language coding rules](/containers/c1-node-cli/.ai/rules/0-typescript.rules.md)  
- [Node CLI rules](/containers/c1-node-cli/.ai/rules/1-node-cli.rules.md)
- [Domain Layer rules](/containers/c1-node-cli/.ai/rules/3-domain-layer.rules.md)

## Instructions

- `src/domain/logger/logEntry.type.ts` : Define the log entry domain model
  - Create an interface `LogEntry` with properties:
    - `id: string` - Unique identifier for the log entry
    - `timestamp: number` - Time when the log entry was created
    - `level: LogLevel` - Severity level of the log entry
    - `message: string` - Main log message content
    - `correlationId: string` - ID for tracking related log entries
    - `metadata?: Record<string, unknown>` - Additional contextual information
    - `stackTrace?: string` - Optional stack trace for errors
  - Define a type `SerializedLogEntry` for JSON representation
  - Create a const `DEFAULT_LOG_ENTRY` with sensible default values

- `src/domain/logger/logEntry.validator.ts` : Implement validation for log entries
  - Create a Zod schema `logEntrySchema` for validating log entries
  - Implement a function `validateLogEntry(entry: unknown): LogEntry` that validates and returns a valid log entry
  - Create a function `isValidLogEntry(entry: unknown): boolean` to check if an object conforms to the LogEntry interface

- `src/domain/logger/logEntryFactory.ts` : Create factory for log entries
  - Implement a function `createLogEntry(message: string, level: LogLevel, context?: LogContext): LogEntry`
  - Create a function `createErrorLogEntry(error: Error, context?: LogContext): LogEntry` for error logs with stack traces
  - Implement a function `serializeLogEntry(entry: LogEntry): SerializedLogEntry` for serialization
  - Create a function `deserializeLogEntry(serialized: SerializedLogEntry): LogEntry` for deserialization

- `src/domain/logger/index.ts` : Create a barrel file
  - Export all log entry domain types and functions

> End of programming instructions for task 6. 
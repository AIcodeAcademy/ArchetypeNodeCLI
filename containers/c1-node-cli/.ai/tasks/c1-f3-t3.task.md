# Task 3 for Plan c1-f3

Create log output writer interface and file system implementation

**Layer**: system  
**Status**: not-started

### Reference

- [Feature Blueprint](/docs/f3-logging.blueprint.md)
- [Implementation Plan](/containers/c1-node-cli/docs/f3-logging.plan.md)
- [Language coding rules](/containers/c1-node-cli/.ai/rules/0-typescript.rules.md)  
- [Node CLI rules](/containers/c1-node-cli/.ai/rules/1-node-cli.rules.md)
- [System Layer rules](/containers/c1-node-cli/.ai/rules/2-system-layer.rules.md)

## Instructions

- `src/system/logger/logWriter.type.ts` : Define the log writer interfaces and types
  - Create an interface `LogWriter` with methods:
    - `write(message: string, level: LogLevel): Promise<void>`
    - `close(): Promise<void>`
  - Define a type `LogWriterOptions` with fields for output path, buffering, etc.
  - Create a type `LogWriterType` as a union of string literals ('console', 'file', 'multi')

- `src/system/logger/consoleLogWriter.util.ts` : Implement console log writer
  - Create a function `createConsoleLogWriter(options?: LogWriterOptions): LogWriter`
  - Implement the LogWriter interface using console methods
  - Map log levels to appropriate console methods (error, warn, info, debug)

- `src/system/logger/fileLogWriter.util.ts` : Implement file system log writer
  - Create a function `createFileLogWriter(options: LogWriterOptions): LogWriter` 
  - Implement file stream creation and management
  - Add error handling for file operations
  - Ensure async file writing with proper buffering

- `src/system/logger/multiLogWriter.util.ts` : Implement multi-writer
  - Create a function `createMultiLogWriter(writers: LogWriter[]): LogWriter`
  - Implement the LogWriter interface to write to all provided writers
  - Add proper error handling when one writer fails

- `src/system/logger/index.ts` : Update the barrel file
  - Export all log writer types and utilities

> End of programming instructions for task 3. 
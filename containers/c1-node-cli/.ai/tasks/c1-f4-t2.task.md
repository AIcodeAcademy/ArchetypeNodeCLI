# Task 2 for Plan c1-f4

Implement utility functions to parse and validate command-line arguments and options from user input.

**Layer**: system  
**Status**: not-started

### Reference

- [Feature Blueprint](/docs/f4-command-handling.blueprint.md)
- [Implementation Plan](/containers/c1-node-cli/docs/f4-command-handling.plan.md)
- [Language coding rules](/containers/c1-node-cli/.ai/rules/0-typescript.rules.md)  
- [Node CLI rules](/containers/c1-node-cli/.ai/rules/1-node-cli.rules.md)
- [System Layer rules](/containers/c1-node-cli/.ai/rules/2-system-layer.rules.md)

## Instructions

### Create Command Parser Utilities

`src/system/commandParser.util.ts`:
- Import the command types from `command.types.ts`
- Create a function `parseCommandLine(args: string[])` that:
  - Extracts the command name from the argument array
  - Identifies flags/options (prefixed with -- or -)
  - Separates arguments from options
  - Returns a structured object with command name, options, and arguments
- Implement a function `parseOptionValue(option: string)` to extract option values (e.g., `--name=value`)
- Create a function `isHelpRequested(options: Record<string, any>)` to check if help was requested
- Add a utility function to normalize option names (convert from kebab-case if needed)

### Create Input Validation Functions

`src/system/commandInputValidator.util.ts`:
- Create a function `validateRequiredArguments(command: Command, providedArgs: string[])` to ensure all required arguments are provided
- Implement a function `validateOptionValues(command: Command, providedOptions: Record<string, any>)` to check if option values are valid
- Add a utility function to handle type coercion for option values (convert string inputs to expected types)
- Create a function to generate validation error messages that are user-friendly

> End of programming instructions for task c1-f4-t2. 
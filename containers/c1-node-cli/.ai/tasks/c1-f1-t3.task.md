---
syntax: "[Template Syntax](/.ai/syntax.template.md)"
task: "Create environment utilities"
folder: "/containers/c1-node-cli/.ai/tasks"
file: "c1-f1-t3.task.md"
---

# Task 3 for Plan c1-f1

Create utility functions for parsing and transforming environment variables.

**Layer**: system  
**Status**: not-started

### Reference

- [Feature Blueprint](/docs/f1-environment-management.blueprint.md)
- [Implementation Plan](/containers/c1-node-cli/docs/f1-environment-management.plan.md)
- [General coding rules](/containers/c1-node-cli/.ai/rules/0-typescript.rules.md)  
- [Node CLI archetype rules](/containers/c1-node-cli/.ai/rules/1-node-cli.rules.md)
- [System layer rules](/containers/c1-node-cli/.ai/rules/system.rules.md)

## Instructions

- `src/system/utils/env-parser.util.ts` : Parse and validate environment variables
  - Create a class `EnvParser` with methods:
    - `parseEnvFile(content: string): Record<string, string>`
    - `parseEnvValue(value: string, type: EnvironmentVariableType): any`
    - `validateEnvVariables(variables: Record<string, string>, schema: EnvironmentVariableSchema): void`
  - Implement proper error handling and validation
  - Support comments and empty lines in .env files

- `src/system/utils/env-transformer.util.ts` : Transform environment variables
  - Create a class `EnvTransformer` with methods:
    - `mergeEnvVariables(...sources: Record<string, string>[]): Record<string, string>`
    - `transformEnvValue(value: string, type: EnvironmentVariableType): any`
    - `interpolateEnvVariables(variables: Record<string, string>): Record<string, string>`
  - Implement variable interpolation (e.g., ${VAR})
  - Handle type conversion and validation

> End of programming instructions for task 3. 
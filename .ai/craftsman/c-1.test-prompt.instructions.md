# Test Prompt Instructions

## Role

Act as a _test engineer_ to write comprehensive test prompts for features. 

## Process

1. **Template Setup**

Read the following :
- [Builder tracking schema](../builder/builder.tracking.schema.json) for naming and tracking changes
- [Craftsman tracking schema](./craftsman.tracking.schema.json) for naming and tracking changes

1. **Information Gathering**

<!--
  containerFolder: /containers/{{ container.slug }}
  This will be the root folder for the container. Use it as an shortcut.
  But inside will be more specific folders for docs, features, ai rules...
 -->
Read the following:
- [Builder Tracking file]({{containerFolder}}/docs/builder.tracking.json) for the container tracking.
- [Feature Blueprint](/docs/{{feature.slug}}.blueprint.md) to understand the feature requirements.
- [Implementation Plan]({{containerFolder}}/docs/{{feature.id}}/{{feature.slug}}.plan.md) if it exists to know what have been implemented.
- [Container Archetype]({{containerFolder}}/docs/{{container.archetype}}.archetype.md) to understand technical context.
- [Test Rules](/containers/{{container.slug}}/.ai/rules/test.rules.md) for testing standards.
- Source code in `{{containerFolder}}/src/` to understand the implementation.

3. **Output**

You are to generate a comprehensive set of tests for the feature as implemented in the current `src` folder. Follow these instructions:

- Follow the [Test Rules](/containers/{{container.slug}}/.ai/rules/test.rules.md) for testing standards.
- Create a test files in the `{{containerFolder}}/test/{{feature.id}}` folder
- Create a test file for module related to the feature in the `src/` folder
- Start by writing the JSDoc gherkin syntax for the feature.
- Then write the `describe` block for the feature with appropriate texts.
- Look for dependencies between the feature and other features, and mock them if needed.
- Then write the tests for the feature.
- Use the test rules to refactor the tests as needed.

4. **Tracking**

- Run the feature test using this command:

```bash
node --test --watch  test/f2/*.test.ts
```

- Fix the errors and update the test file.
- Run once more to verify the tests are working.
- Stop with or without errors.

- Update the [Craftsman Tracking file]({{containerFolder}}/docs/craftsman.tracking.json):
  - Set the feature status to `test-verified` or `test-failed`
  - Initialize git field as empty string
